
<!DOCTYPE HTML>
<html>
<head>
	<script data-cfasync="false" type="text/javascript" src="//use.typekit.net/axj3cfp.js"></script>
	<script data-cfasync="false" type="text/javascript">try{Typekit.load();}catch(e){}</script>
	<meta charset="utf-8">
	<title>Art thou weary, tender heart?  | Faith, Hope, Charity</title>

<meta name="author" content="Jerome Song"> 

<meta name="description" content="Keen on the information technology."> <meta name="keywords" content="android , java , ruby , linux , software , programming , web development ,ubuntu">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

	<link href="/atom.xml" rel="alternate" title="Faith, Hope, Charity" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	
  	<link href="/stylesheets/data-table.css" media="screen, projection" rel="stylesheet" type="text/css" />
	<link href="/stylesheets/font-awesome.min.css" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript" src="/javascripts/jquery.fancybox.pack.js"></script>

<script language="Javascript" type="text/javascript">
$(document).ready(
  function() {
    (function($) {
      $(".fancybox[data-content-id]").each(function() {
        this.href = $(this).data('content-id');
      });
      $(".fancybox").fancybox({
        beforeLoad: function() {
          var el, 
              id = $(this.element).data('title-id');

          if (id) {
            el = $('#' + id);

            if (el.length) {
              this.title = el.html();
            }
          }
          if ($(this).data('content')) {
            this.content = $(this).data('content');
          }
        },
        helpers: {
          title: {
            type: 'inside'
          }
        }
      });
    })(jQuery);
  }
);
</script>

	
</head>



<body>
	<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
	<nav id="home-nav">
    	<ul>
        	<li>
         		 <a href="/">
           	 	<span class="icon-home"></span>
           	 	<span class="screen-reader-text">Home</span>
         		 </a>
      		</li>
       </ul>
	</nav>​
	<header id="header" class="inner"><h1><a href="/">Faith, Hope, Charity</a></h1>
<h4>Art thou weary, tender heart?</h4>
<nav id="main-nav"><ul>
	<li><a href="/archives">Archive</a></li>
	<li><a href="/timeline">Timeline</a></li>
	<li><a href="/about">About</a></li>
</ul>
</nav>
<nav id="mobile-nav">
	<div class="alignleft menu">
		<a class="button">Menu</a>
		<div class="container"><ul>
	<li><a href="/archives">Archive</a></li>
	<li><a href="/timeline">Timeline</a></li>
	<li><a href="/about">About</a></li>
</ul>
</div>
	</div>
	<div class="alignright search">
		<a class="button"></a>
		<div class="container">
			<form action="http://google.com/search" method="get">
				<input type="text" name="q" results="0">
				<input type="hidden" name="q" value="site:1vn.wang">
			</form>
		</div>
	</div>
</nav>


</header>

	<div id="content" class="inner">


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2021/10/28/learn-opentag/">
		
			Learn OpenTag</a>
	</h2>
	<div class="entry-content">
		

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2021-10-28T14:36:00+08:00" pubdate data-updated="true">Oct 28<span>th</span>, 2021</time></div>
	


	
		<span class="comments"><a href="/blog/2021/10/28/learn-opentag//blog/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2016/01/06/githug/">
		
			Githug秘籍</a>
	</h2>
	<div class="entry-content">
		<ol>
<li>init</li>
<li>config</li>
<li>add</li>
<li>commit</li>
<li>clone</li>
<li>clone_to_folder</li>
<li>ignore</li>
<li>include</li>
<li>status</li>
<li>number_of_files_committed</li>
<li>rm</li>
<li>rm_cached</li>
<li>stash</li>
<li>rename</li>
<li>restructure</li>
<li>log</li>
<li>tag</li>
<li>push_tags</li>
<li>commit_amend</li>
<li>commit_in_future</li>
<li>reset</li>
<li>reset_soft</li>
<li>checkout_file</li>
<li>remote</li>
<li>remote_url</li>
<li>pull</li>
<li>remote_add</li>
<li>push</li>
<li>diff</li>
<li>blame</li>
<li>branch</li>
<li>checkout</li>
<li>checkout_tag</li>
<li>checkout_tag_over_branch</li>
<li>branch_at</li>
<li>delete_branch</li>
<li>push_branch</li>
<li>merge</li>
<li>fetch</li>
<li>rebase</li>
<li>repack</li>
<li>cherry-pick</li>
<li>grep</li>
<li>rename_commit</li>
<li>squash</li>
<li>merge_squash</li>
<li>reorder</li>
<li>bisect</li>
<li>stage_lines</li>
<li>find_old_branch</li>
<li>revert</li>
<li>restore</li>
<li>conflict</li>
<li>submodule</li>
<li>contribute</li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2016-01-06T11:31:00+08:00" pubdate data-updated="true">Jan 6<span>th</span>, 2016</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/git/'>git</a>

</div>


	
		<span class="comments"><a href="/blog/2016/01/06/githug//blog/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/01/24/resource-shrinking/">
		
			Resource Shrinking</a>
	</h2>
	<div class="entry-content">
		<p><a href="http://tools.android.com/tech-docs/new-build-system/resource-shrinking">http://tools.android.com/tech-docs/new-build-system/resource-shrinking</a></p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-01-24T20:33:00+08:00" pubdate data-updated="true">Jan 24<span>th</span>, 2015</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/android/'>android</a>

</div>


	
		<span class="comments"><a href="/blog/2015/01/24/resource-shrinking//blog/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/01/22/best-practices-for-api-versioning/">
		
			Best Practices for API Versioning</a>
	</h2>
	<div class="entry-content">
		<p>This is a good and a tricky question. The topic of URI design is at the same time the most prominent part of a REST API and, therefore, a potentially long-term commitment towards the users of that API.</p>

<p>Since evolution of an application and, to a lesser extent, its API is a fact of life and that it&rsquo;s even similar to the evolution of a seemingly complex product like a programming language, the URI design should have less natural constraints and it should be preserved over time. The longer the application&rsquo;s and API&rsquo;s lifespan, the greater the commitment to the users of the application and API.</p>

<p>On the other hand, another fact of life is that it is hard to foresee all the resources and their aspects that would be consumed through the API. Luckily, it is not necessary to design the entire API which will be used until <a href="http://en.wikipedia.org/wiki/Apocalypse">Apocalypse</a>. It is sufficient to correctly define all the resource end-points and the addressing scheme of every resource and resource instance.</p>

<p>Over time you may need to add new resources and new attributes to each particular resource, but the method that API users follow to access a particular resources should not change once a resource addressing scheme becomes public and therefore final.</p>

<p>This method applies to HTTP verb semantics (e.g. PUT should always update/replace) and HTTP status codes that are supported in earlier API versions (they should continue to work so that API clients that have worked without human intervention should be able to continue to work like that).</p>

<p>Furthermore, since embedding of API version into the URI would disrupt the concept of <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm#sec_5_1_5">hypermedia as the engine of application state</a> (stated in Roy T. Fieldings PhD dissertation) by having a resource address/URI that would change over time, I would conclude that API versions should not be kept in resource URIs for a long time meaning that <font color="green">resource URIs that API users can depend on should be permalinks</font>.</p>

<p>Sure, it is possible to embed API version in base URI but only for reasonable and restricted uses like debugging a API client that works with the the new API version. Such versioned APIs should be time-limited and available to limited groups of API users (like during closed betas) only. Otherwise, you commit yourself where you shouldn&rsquo;t.</p>

<p>A couple of thoughts regarding maintenance of API versions that have expiration date on them. All programming platforms/languages commonly used to implement web services (Java, .NET, PHP, Perl, Rails, etc.) allow easy binding of web service end-point(s) to a base URI. This way it&rsquo;s easy to gather and keep a collection of files/classes/methods separate across different API versions.</p>

<p>From the API users POV, it&rsquo;s also easier to work with and bind to a particular API version when it&rsquo;s this obvious but only for limited time, i.e. during development.</p>

<p>From the API maintainer&rsquo;s POV, it&rsquo;s easier to maintain different API versions in parallel by using source control systems that predominantly work on files as the smallest unit of (source code) versioning.</p>

<p>However, with API versions clearly visible in URI there&rsquo;s a caveat: one might also object this approach since <font color="red">API history becomes visible/aparent in the URI design</font> and therefore is prone to changes over time which goes against the guidelines of REST. I agree!</p>

<p>The way to go around this reasonable objection, is to implement the latest API version under versionless API base URI. In this case, API client developers can choose to either:</p>

<ul>
<li><p>develop against the latest one (committing themselves to maintain the application protecting it from eventual API changes that might break their badly designed API client).</p></li>
<li><p>bind to a specific version of the API (which becomes apparent) but only for a limited time</p></li>
</ul>


<p>For example, if API v3.0 is the latest API version, the following two should be aliases (i.e. behave identically to all API requests):</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://shonzilla/api/customers/1234
</span><span class='line'>http://shonzilla/api/v3.0/customers/1234
</span><span class='line'>http://shonzilla/api/v3/customers/1234</span></code></pre></td></tr></table></div></figure>


<p>In addition, API clients that still try to point to the <em>old</em> API should be informed to use the latest previous API version, if the API version they&rsquo;re using is obsolete or not supported anymore. So accessing any of the obsolete URIs like these:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://shonzilla/api/v2.2/customers/1234
</span><span class='line'>http://shonzilla/api/v2.0/customers/1234
</span><span class='line'>http://shonzilla/api/v2/customers/1234
</span><span class='line'>http://shonzilla/api/v1.1/customers/1234
</span><span class='line'>http://shonzilla/api/v1/customers/1234</span></code></pre></td></tr></table></div></figure>


<p>should return any of the 30x HTTP status codes that indicate redirection that are used in conjunction with <code>Location</code> HTTP header that redirects to the appropriate version of resource URI which remain to be this one:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>http://shonzilla/api/customers/1234</span></code></pre></td></tr></table></div></figure>


<p>There are at least two redirection HTTP status codes that are appropriate for API versioning scenarios:</p>

<ul>
<li><p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.2">301 Moved permanently</a> indicating that the resource with a requested URI is moved permanently to another URI (which should be a resource instance permalink that does not contain API version info). This status code can be used to indicate an obsolete/unsupported API version, informing API client that a versioned resource URI been replaced by a resource permalink.</p></li>
<li><p><a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.3">302 Found</a> indicating that the requested resource temporarily is located at another location, while requested URI may still supported. This status code may be useful when the version-less URIs are temporarily unavailable and that a request should be repeated using the redirection address (e.g. pointing to the URI with APi version embedded) and we want to tell clients to keep using it (i.e. the permalinks).</p></li>
<li><p>other scenarios can be found in <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3">Redirection 3xx chapter of HTTP 1.1 specification</a></p></li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-01-22T19:53:00+08:00" pubdate data-updated="true">Jan 22<span>nd</span>, 2015</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/web/'>web</a>

</div>


	
		<span class="comments"><a href="/blog/2015/01/22/best-practices-for-api-versioning//blog/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/01/20/how-to-delete-a-remote-git-tag/">
		
			How to Delete a Remote Git Tag</a>
	</h2>
	<div class="entry-content">
		<p>You probably won&rsquo;t need to do this often (if ever at all) but just in case, here is how to delete a tag from a remote Git repository.</p>

<p>If you have a tag named &lsquo;demo&rsquo; then you would just do this:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git tag -d demo
</span><span class='line'>git push origin :refs/tags/demo
</span><span class='line'>That will remove 'demo' from the remote repository.</span></code></pre></td></tr></table></div></figure>




		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-01-20T22:02:00+08:00" pubdate data-updated="true">Jan 20<span>th</span>, 2015</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/git/'>git</a>

</div>


	
		<span class="comments"><a href="/blog/2015/01/20/how-to-delete-a-remote-git-tag//blog/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/01/17/copyonwritearraylist/">
		
			CopyOnWriteArrayList</a>
	</h2>
	<div class="entry-content">
		<p>A thread-safe variant of ArrayList in which all mutative operations (add, set, and so on) are implemented by making a fresh copy of the underlying array.
This is ordinarily too costly, but may be more efficient than alternatives when traversal operations vastly outnumber mutations, and is useful when you cannot or don&rsquo;t want to synchronize traversals, yet need to preclude interference among concurrent threads. The &ldquo;snapshot&rdquo; style iterator method uses a reference to the state of the array at the point that the iterator was created. This array never changes during the lifetime of the iterator, so interference is impossible and the iterator is guaranteed not to throw ConcurrentModificationException. The iterator will not reflect additions, removals, or changes to the list since the iterator was created. Element-changing operations on iterators themselves (remove, set, and add) are not supported. These methods throw UnsupportedOperationException.</p>

<p>All elements are permitted, including null.</p>

<p>Memory consistency effects: As with other concurrent collections, actions in a thread prior to placing an object into a CopyOnWriteArrayList happen-before actions subsequent to the access or removal of that element from the CopyOnWriteArrayList in another thread.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-01-17T22:05:00+08:00" pubdate data-updated="true">Jan 17<span>th</span>, 2015</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/java/'>java</a>

</div>


	
		<span class="comments"><a href="/blog/2015/01/17/copyonwritearraylist//blog/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/01/12/sqlite-notes/">
		
			SQLite Notes</a>
	</h2>
	<div class="entry-content">
		<p>The Offsets Function of fts</p>

<p>Integer Interpretation</p>

<p>0 The column number that the term instance occurs in (0 for the leftmost column of the FTS table, 1 for the next leftmost, etc.).
1 The term number of the matching term within the full-text query expression. Terms within a query expression are numbered starting from 0 in the order that they occur.
2 The byte offset of the matching term within the column.
3 The size of the matching term in bytes.</p>

		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-01-12T14:43:00+08:00" pubdate data-updated="true">Jan 12<span>th</span>, 2015</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/sqlite/'>SQLite</a>

</div>


	
		<span class="comments"><a href="/blog/2015/01/12/sqlite-notes//blog/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2015/01/09/android-studio-live-templates/">
		
			Android Studio Live Templates</a>
	</h2>
	<div class="entry-content">
		<p><strong>Type the abbrs then click <code>TAB</code>, template codes will be generated automatically.</strong></p>

<h3>iterations</h3>

<ul>
<li><code>fori</code> Create iteration loop</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">$INDEX$</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">$INDEX$</span> <span class="o">&lt;</span> <span class="n">$LIMIT$</span><span class="p">;</span> <span class="n">$INDEX$</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">$END$</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>itar</code> Iterate elements of array</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">$INDEX$</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">$INDEX$</span> <span class="o">&lt;</span> <span class="n">$ARRAY$</span><span class="p">.</span><span class="na">length</span><span class="p">;</span> <span class="n">$INDEX$</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">$ELEMENT_TYPE$</span> <span class="n">$VAR$</span> <span class="o">=</span> <span class="n">$ARRAY$</span><span class="o">[</span><span class="n">$INDEX$</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>  <span class="n">$END$</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>itco</code> Iterate elements of java.util.Collection</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span></span><span class="k">for</span><span class="p">(</span><span class="n">$ITER_TYPE$</span> <span class="n">$ITER$</span> <span class="o">=</span> <span class="n">$COLLECTION$</span><span class="p">.</span><span class="na">iterator</span><span class="p">();</span> <span class="n">$ITER$</span><span class="p">.</span><span class="na">hasNext</span><span class="p">();</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">$ELEMENT_TYPE$</span> <span class="n">$VAR$</span> <span class="o">=</span><span class="n">$CAST$</span> <span class="n">$ITER$</span><span class="p">.</span><span class="na">next</span><span class="p">();</span>
</span><span class='line'>  <span class="n">$END$</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>iten</code> Iterate java.util.Enumeration</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span></span><span class="k">while</span><span class="p">(</span><span class="n">$ENUM$</span><span class="p">.</span><span class="na">hasMoreElements</span><span class="p">()){</span>
</span><span class='line'>  <span class="n">$TYPE$</span> <span class="n">$VAR$</span> <span class="o">=</span> <span class="n">$CAST$</span> <span class="n">$ENUM$</span><span class="p">.</span><span class="na">nextElement</span><span class="p">();</span>
</span><span class='line'>  <span class="n">$END$</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>iter</code> Iterate Iterable | Array in J2SDK 5.0 syntax</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span></span><span class="k">for</span> <span class="p">(</span><span class="n">$ELEMENT_TYPE$</span> <span class="n">$VAR$</span> <span class="p">:</span> <span class="n">$ITERABLE_TYPE$</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">$END$</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>itit</code> Iterate java.util.Iterator</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span></span><span class="k">while</span><span class="p">(</span><span class="n">$ITER$</span><span class="p">.</span><span class="na">hasNext</span><span class="p">()){</span>
</span><span class='line'>  <span class="n">$TYPE$</span> <span class="n">$VAR$</span> <span class="o">=</span> <span class="n">$CAST$</span> <span class="n">$ITER$</span><span class="p">.</span><span class="na">next</span><span class="p">();</span>
</span><span class='line'>  <span class="n">$END$</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>itli</code> Iterate elements of java.util.List</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span></span><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">$INDEX$</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">$INDEX$</span> <span class="o">&lt;</span> <span class="n">$LIST$</span><span class="p">.</span><span class="na">size</span><span class="p">();</span> <span class="n">$INDEX$</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">$ELEMENT_TYPE$</span> <span class="n">$VAR$</span> <span class="o">=</span> <span class="n">$CAST$</span> <span class="n">$LIST$</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">$INDEX$</span><span class="p">);</span>
</span><span class='line'>  <span class="n">$END$</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>ittok</code> Iterate tokens from String</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span></span><span class="k">for</span> <span class="p">(</span><span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">StringTokenizer</span> <span class="n">$TOKENIZER$</span> <span class="o">=</span> <span class="k">new</span> <span class="n">java</span><span class="p">.</span><span class="na">util</span><span class="p">.</span><span class="na">StringTokenizer</span><span class="p">(</span><span class="n">$STRING$</span><span class="p">);</span> <span class="n">$TOKENIZER$</span><span class="p">.</span><span class="na">hasMoreTokens</span><span class="p">();</span> <span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">String</span> <span class="n">$VAR$</span> <span class="o">=</span> <span class="n">$TOKENIZER_COPY$</span><span class="p">.</span><span class="na">nextToken</span><span class="p">();</span>
</span><span class='line'>    <span class="n">$END$</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>itve</code> Iterate elements of java.util.Vector</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">$INDEX$</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">$INDEX$</span> <span class="o">&lt;</span> <span class="n">$VECTOR$</span><span class="p">.</span><span class="na">size</span><span class="p">();</span> <span class="n">$INDEX$</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">$ELEMENT_TYPE$</span> <span class="n">$VAR$</span> <span class="o">=</span> <span class="n">$CAST$</span> <span class="n">$VECTOR$</span><span class="p">.</span><span class="na">elementAt</span><span class="p">(</span><span class="n">$INDEX$</span><span class="p">);</span>
</span><span class='line'>  <span class="n">$END$</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>ritar</code> Iterate elements of array in reverse order</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">$INDEX$</span> <span class="o">=</span> <span class="n">$ARRAY$</span><span class="p">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">$INDEX$</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">$INDEX$</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="n">$ELEMENT_TYPE$</span> <span class="n">$VAR$</span> <span class="o">=</span> <span class="n">$ARRAY$</span><span class="o">[</span><span class="n">$INDEX$</span><span class="o">]</span><span class="p">;</span>
</span><span class='line'>  <span class="n">$END$</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>other</h3>

<ul>
<li>geti</li>
<li>ifn</li>
<li>inn</li>
<li>inst</li>
<li>lazy</li>
<li>lst</li>
<li>mn</li>
<li>mx</li>
<li>psvm</li>
<li>toar

<h3>output</h3></li>
<li>serr</li>
<li>souf</li>
<li>sout</li>
<li>soutm</li>
<li>soutp</li>
<li>soutv

<h3>plain</h3></li>
<li>psf</li>
<li>psfi</li>
<li>psfs</li>
<li>St</li>
<li>thr</li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2015-01-09T21:29:00+08:00" pubdate data-updated="true">Jan 9<span>th</span>, 2015</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/tricks/'>tricks</a>

</div>


	
		<span class="comments"><a href="/blog/2015/01/09/android-studio-live-templates//blog/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/12/26/android-hardware-acceleration/">
		
			Android&#8211;Hardware Acceleration</a>
	</h2>
	<div class="entry-content">
		<p>Android 中的硬件加速
本文的主要内容来自 SDK 文章的&#8221;Hardware Acceleration”.</p>

<p>从 Android 3.0 开始，Android 的 2D 渲染管线可以更好的支持硬件加速。硬件加速使用 GPU 进行 View 上的绘制操作。</p>

<p>硬件加速可以在一下四个级别开启或关闭：</p>

<p>Application
Activity
Window
View
Application 级别</p>

<p>往您的应用程序 AndroidManifest.xml 文件为 application 标签添加如下的属性即可为整个应用程序开启硬件加速：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;application android:hardwareAccelerated="true" .../&gt;</span></code></pre></td></tr></table></div></figure>


<p>Activity 级别</p>

<p>您还可以控制每个 activity 是否开启硬件加速，只需在 activity 元素中添加 android:hardwareAccelerated 属性即可办到。比如下面的例子，在 application 级别开启硬件加速，但在某个 activity 上关闭硬件加速。</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>&lt;application android:hardwareAccelerated="true"&gt;
</span><span class='line'>    &lt;activity ... /&gt;
</span><span class='line'>    &lt;activity android:hardwareAccelerated="false" /&gt;
</span><span class='line'>&lt;/application&gt;</span></code></pre></td></tr></table></div></figure>


<p>Window 级别</p>

<p>如果您需要更小粒度的控制，可以使用如下代码开启某个 window 的硬件加速：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span></span><span class="n">getWindow</span><span class="p">().</span><span class="na">setFlags</span><span class="p">(</span>
</span><span class='line'>    <span class="n">WindowManager</span><span class="p">.</span><span class="na">LayoutParams</span><span class="p">.</span><span class="na">FLAG_HARDWARE_ACCELERATED</span><span class="p">,</span>
</span><span class='line'>    <span class="n">WindowManager</span><span class="p">.</span><span class="na">LayoutParams</span><span class="p">.</span><span class="na">FLAG_HARDWARE_ACCELERATED</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>注：目前还不能在 window 级别关闭硬件加速。</p>

<p>View 级别</p>

<p>您可以在运行时用以下的代码关闭单个 view 的硬件加速：</p>

<p>myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);
注：您不能在 view 级别开启硬件加速</p>

<p>为什么需要这么多级别的控制？</p>

<p>很明显，硬件加速能够带来性能提升，android 为什么要弄出这么多级别的控制，而不是默认就是全部硬件加速呢？原因是并非所有的 2D 绘图操作支持硬件加速，如果您的程序中使用了自定义视图或者绘图调用，程序可能会工作不正常。如果您的程序中只是用了标准的视图和 Drawable，放心大胆的开启硬件加速吧！具体是哪些绘图操作不支持硬件加速呢?以下是已知不支持硬件加速的绘图操作：</p>

<p>Canvas
clipPath()
clipRegion()
drawPicture()
drawPosText()
drawTextOnPath()
drawVertices()
Paint
setLinearText()
setMaskFilter()
setRasterizer()
另外还有一些绘图操作，开启和不开启硬件加速，效果不一样：</p>

<p>Canvas
clipRect()： XOR, Difference 和 ReverseDifference 裁剪模式被忽略，3D 变换将不会应用在裁剪的矩形上。
drawBitmapMesh()：colors 数组被忽略
drawLines()：反锯齿不支持
setDrawFilter()：可以设置，但无效果
Paint
setDither()： 忽略
setFilterBitmap()：过滤永远开启
setShadowLayer()：只能用在文本上
ComposeShader
ComposeShader 只能包含不同类型的 shader (比如一个 BitmapShader 和一个 LinearGradient，但不能是两个 BitmapShader 实例)
ComposeShader 不能包含 ComposeShader
如果应用程序受到这些影响，您可以在受影响的部分调用 setLayerType(View.LAYER_TYPE_SOFTWARE, null)，这样在其它地方仍然可以享受硬件加速带来的好处</p>

<p>Android 的绘制模型</p>

<p>开启硬件加速后，Android 框架将采用新的绘制模型。基于软件的绘制模型和基于硬件的绘制模型有和不同呢？</p>

<p>基于软件的绘制模型</p>

<p>在软件绘制模型下，视图按照如下两个步骤绘制：</p>

<ol>
<li><p>Invalidate the hierarchy（注：hierarchy 怎么翻译？）</p></li>
<li><p>Draw the hierarchy</p></li>
</ol>


<p>应用程序调用 invalidate()更新 UI 的某一部分，失效(invalidation)消息将会在整个视图层中传递，计算每个需要重绘的区域（即脏区域）。然后 Android 系统将会重绘所有和脏区域有交集的 view。很明显，这种绘图模式存在缺点：</p>

<ol>
<li><p>每个绘制操作中会执行不必要的代码。比如如果应用程序调用 invalidate()重绘 button，而 button 又位于另一个 view 之上，即使该 view 没有变化，也会进行重绘。</p></li>
<li><p>可能会掩盖一些应用程序的 bug。因为 android 系统会重绘与脏区域有交集的 view，所以 view 的内容可能会在没有调用 invalidate()的情况下重绘。这可能会导致一个 view 依赖于其它 view 的失效才得到正确的行为。</p></li>
</ol>


<p>基于硬件的绘制模型</p>

<p>Android 系统仍然使用 invalidate()和 draw()来绘制 view，但在处理绘制上有所不同。Android 系统记录绘制命令到显示列表，而不是立即执行绘制命令。另一个优化就是 Android 系统只需记录和更新标记为脏（通过 invalidate()）的 view。新的绘制模型包含三个步骤：</p>

<ol>
<li><p>Invalidate the hierarchy</p></li>
<li><p>记录和更新显示列表</p></li>
<li><p>绘制显示列表</p></li>
</ol>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-12-26T09:55:00+08:00" pubdate data-updated="true">Dec 26<span>th</span>, 2014</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/android/'>android</a>

</div>


	
		<span class="comments"><a href="/blog/2014/12/26/android-hardware-acceleration//blog/index.html#disqus_thread">Comments</a></span>
	
</div></article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2014/12/06/git-log-pretty/">
		
			Git Log Pretty</a>
	</h2>
	<div class="entry-content">
		<ul>
<li>%H: commit hash</li>
<li>%h: 缩短的 commit hash</li>
<li>%T: tree hash</li>
<li>%t: 缩短的 tree hash</li>
<li>%P: parent hashes</li>
<li>%p: 缩短的 parent hashes</li>
<li>%an: 作者名字</li>
<li>%aN: mailmap 的作者名字 (.mailmap 对应，详情参照 git-shortlog(1)或者 git-blame(1))</li>
<li>%ae: 作者邮箱</li>
<li>%aE: 作者邮箱 (.mailmap 对应，详情参照 git-shortlog(1)或者 git-blame(1))</li>
<li>%ad: 日期 (&ndash;date= 制定的格式)</li>
<li>%aD: 日期, RFC2822 格式</li>
<li>%ar: 日期, 相对格式(1 day ago)</li>
<li>%at: 日期, UNIX timestamp</li>
<li>%ai: 日期, ISO 8601 格式</li>
<li>%cn: 提交者名字</li>
<li>%cN: 提交者名字 (.mailmap 对应，详情参照 git-shortlog(1)或者 git-blame(1))</li>
<li>%ce: 提交者 email</li>
<li>%cE: 提交者 email (.mailmap 对应，详情参照 git-shortlog(1)或者 git-blame(1))</li>
<li>%cd: 提交日期 (&ndash;date= 制定的格式)</li>
<li>%cD: 提交日期, RFC2822 格式</li>
<li>%cr: 提交日期, 相对格式(1 day ago)</li>
<li>%ct: 提交日期, UNIX timestamp</li>
<li>%ci: 提交日期, ISO 8601 格式</li>
<li>%d: ref 名称</li>
<li>%e: encoding</li>
<li>%s: commit 信息标题</li>
<li>%f: sanitized subject line, suitable for a filename</li>
<li>%b: commit 信息内容</li>
<li>%N: commit notes</li>
<li>%gD: reflog selector, e.g., refs/stash@{1}</li>
<li>%gd: shortened reflog selector, e.g., stash@{1}</li>
<li>%gs: reflog subject</li>
<li>%Cred: 切换到红色</li>
<li>%Cgreen: 切换到绿色</li>
<li>%Cblue: 切换到蓝色</li>
<li>%Creset: 重设颜色</li>
<li>%C(&hellip;): 制定颜色, as described in color.branch.* config option</li>
<li>%m: left, right or boundary mark</li>
<li>%n: 换行</li>
<li>%%: a raw %</li>
<li>%x00: print a byte from a hex code</li>
<li>%w([[,[,]]]): switch line wrapping, like the -w option of git-shortlog(1).</li>
</ul>


		
		
	</div>


<div class="meta">
	<div class="date">








  


<time datetime="2014-12-06T19:40:00+08:00" pubdate data-updated="true">Dec 6<span>th</span>, 2014</time></div>
	

<div class="tags">

	<a class='category' href='/blog/categories/git/'>git</a>

</div>


	
		<span class="comments"><a href="/blog/2014/12/06/git-log-pretty//blog/index.html#disqus_thread">Comments</a></span>
	
</div></article>

<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
	<footer id="footer" class="inner">Copyright &copy; 2021

    Jerome Song

<br>
<a href="https://beian.miit.gov.cn/#/Integrated/index" class="href">京ICP备18059042号</a> Powered by Octopress. </footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'ziso';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fbc6d82df32ac0c05b0381389f892f199' type='text/javascript'%3E%3C/script%3E"));
</script>


	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-52131984-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>



</body>
</html>
